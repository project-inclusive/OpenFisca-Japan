# TODO: 高等学校等就学支援金_所得判定基準の単体テスト追加
# (現状は自分か配偶者が世帯主でないと正確に算出できないため、各種控除を人物ごとに算出できるようになったら対応)

# 支給条件のテスト

- name: 子供がいない
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
    世帯員:
      自分:
        年齢: 30
  output:
    高等学校等就学支援金_最小: 0
    高等学校等就学支援金_最大: 0

- name: 子供がいるが高校生ではない(学年)
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 9
  output:
    高等学校等就学支援金_最小: 0
    高等学校等就学支援金_最大: 0

- name: 子供がいるが高校生ではない（高校に通っていない）
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 16
        学年: 10 # 学生でなくても機械的に算出される
  output:
    高等学校等就学支援金_最小: 0
    高等学校等就学支援金_最大: 0

# 所得判定基準の境界値テスト

- name: 所得判定基準を満たす（基準以上）
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304200
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 16
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 0
    高等学校等就学支援金_最大: 0 # 単位制で一年に最大単位数取得した場合の月額

- name: 所得判定基準を満たす（基準未満）
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 16
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 9900
    高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額

- name: 所得判定基準を満たす（加算額基準以上）
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154500
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 16
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 9900
    高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額

- name: 所得判定基準を満たす（加算額基準未満）
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 16
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 33000
    高等学校等就学支援金_最大: 40100 # 単位制で一年に最大単位数取得した場合の月額

# 支給額のテスト

# 履修種別ごとのテストケース
- name: 全日制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 9900
    高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額

- name: 定時制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 定時制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 2700
    高等学校等就学支援金_最大: 4350 # 単位制で一年に最大単位数取得した場合の月額

- name: 通信制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 通信制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 520
    高等学校等就学支援金_最大: 840 # 単位制で一年に最大単位数取得した場合の月額

# 運営種別ごとのテストケース
- name: 全日制、国立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 国立
  output:
    高等学校等就学支援金_最小: 9600
    高等学校等就学支援金_最大: 9600 # 国立は定額のみ

- name: 全日制、私立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 304199
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 9900
    高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額

# 加算される場合の支給額のテスト

# 履修種別ごとのテストケース
- name: 全日制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 9900
    高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額

- name: 定時制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 定時制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 2700
    高等学校等就学支援金_最大: 4350 # 単位制で一年に最大単位数取得した場合の月額

- name: 通信制、公立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 通信制課程
        高校運営種別: 公立
  output:
    高等学校等就学支援金_最小: 520
    高等学校等就学支援金_最大: 840 # 単位制で一年に最大単位数取得した場合の月額

# 運営種別ごとのテストケース
- name: 全日制、国立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 国立
  output:
    高等学校等就学支援金_最小: 9600
    高等学校等就学支援金_最大: 9600 # 国立は定額のみ

- name: 全日制、私立
  period: 2023-08-01
  input:
    世帯:
      親一覧:
        - 自分
        - 配偶者
      子一覧:
        - 子1
      高等学校等就学支援金_所得判定基準: 154499
    世帯員:
      自分:
        年齢: 45
      配偶者:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    高等学校等就学支援金_最小: 33000
    高等学校等就学支援金_最大: 40100 # 単位制で一年に最大単位数取得した場合の月額

# 複数世帯テスト

- name: 複数世帯テスト
  period: 2023-08-01
  input:
    世帯一覧:
      世帯1:
        親一覧:
          - 自分1
          - 配偶者1
        子一覧:
          - 子1
        高等学校等就学支援金_所得判定基準: 154499
      世帯2:
        親一覧:
          - 自分2
          - 配偶者2
        子一覧:
          - 子2
        高等学校等就学支援金_所得判定基準: 154500
    世帯員:
      自分1:
        年齢: 45
      配偶者1:
        年齢: 45
      子1:
        年齢: 15
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
      自分2:
        年齢: 45
      配偶者2:
        年齢: 45
      子2:
        年齢: 16
        学年: 10
        高校履修種別: 全日制課程
        高校運営種別: 私立
  output:
    世帯一覧:
      世帯1:
        高等学校等就学支援金_最小: 33000
        高等学校等就学支援金_最大: 40100 # 単位制で一年に最大単位数取得した場合の月額
      世帯2:
        高等学校等就学支援金_最小: 9900
        高等学校等就学支援金_最大: 12030 # 単位制で一年に最大単位数取得した場合の月額
